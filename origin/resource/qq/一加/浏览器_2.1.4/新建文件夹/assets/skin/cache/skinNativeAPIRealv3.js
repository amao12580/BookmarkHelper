function GetRequest(){var url=location.search;var theRequest=new Object();if(url.indexOf("?")!=-1){var str=url.substr(1);if(str.indexOf("&")!=-1){var strs=str.split("&");for(var i=0;i<strs.length;i++){theRequest[strs[i].split("=")[0]]=decodeURI(strs[i].split("=")[1]);}}else{theRequest[str.split("=")[0]]=decodeURI(str.split("=")[1]);}}
return theRequest;}
if(window.qb_bridge==undefined){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf('mqqbrowser/5')!=-1){window.qb_bridge={nativeExec:function(service,action,callbackId,argsJson){return prompt(argsJson,'mtt:['+[service,action,callbackId]+']');}};}else{console.warn('Not a qq browser or version too old');}}
qb_bridge.callbackId=Math.floor(Math.random()*2000000000);qb_bridge.callbacks={};qb_bridge.exec=function(success,fail,service,action,args){var callbackId=service+qb_bridge.callbackId++,argsJson=args?JSON.stringify(args):"";if(success||fail){qb_bridge.callbacks[callbackId]={success:success,fail:fail};}
var ret=qb_bridge.nativeExec(service,action,callbackId,argsJson);if(ret==='true'){return true;}else if(ret==='false'){return false;}else{return ret;}};if(typeof x5==="undefined"){var x5={commandQueue:[],commandQueueFlushing:false};x5.callbackId=0;x5.callbacks={};x5.callbackStatus={NO_RESULT:0,OK:1,CLASS_NOT_FOUND_EXCEPTION:2,ILLEGAL_ACCESS_EXCEPTION:3,INSTANTIATION_EXCEPTION:4,MALFORMED_URL_EXCEPTION:5,IO_EXCEPTION:6,INVALID_ACTION:7,JSON_EXCEPTION:8,ERROR:9};x5.createBridge=function(){var bridge=document.createElement("iframe");bridge.setAttribute("style","display:none;");bridge.setAttribute("height","0px");bridge.setAttribute("width","0px");bridge.setAttribute("frameborder","0");document.documentElement.appendChild(bridge);return bridge};x5.exec=function(successCallback,errorCallback,service,action,options){var callbackId=null;var command={className:service,methodName:action,options:{},arguments:[]};if(successCallback||errorCallback){callbackId=service+x5.callbackId++;x5.callbacks[callbackId]={success:successCallback,fail:errorCallback}}
if(callbackId!=null){command.arguments.push(callbackId)}
for(var i=0;i<options.length;++i){var arg=options[i];if(arg==undefined||arg==null){continue}else{if(typeof(arg)=="object"){command.options=arg}else{command.arguments.push(arg)}}}
x5.commandQueue.push(JSON.stringify(command));if(x5.commandQueue.length==1&&!x5.commandQueueFlushing){if(!x5.bridge){x5.bridge=x5.createBridge()}
x5.bridge.src="mtt:"+service+":"+action}};x5.getAndClearQueuedCommands=function(){json=JSON.stringify(x5.commandQueue);x5.commandQueue=[];return json};x5.callbackSuccess=function(callbackId,args){if(x5.callbacks[callbackId]){if(args.status===x5.callbackStatus.OK){try{if(x5.callbacks[callbackId].success){x5.callbacks[callbackId].success(args.message)}}catch(e){}}
if(!args.keepCallback){delete x5.callbacks[callbackId]}}};x5.callbackError=function(callbackId,args){if(x5.callbacks[callbackId]){try{if(x5.callbacks[callbackId].fail){x5.callbacks[callbackId].fail(args.message)}}catch(e){G_helper.errorUploader('script',"Error in error callback: "+callbackId+" = "+e)}
if(!args.keepCallback){delete x5.callbacks[callbackId]}}};x5.app=x5.app||{};x5.skin=x5.skin||{};x5.app.shareToBlog=function(options,succCallback,errCallback){if(typeof succCallback!=="function"){return}
if(typeof errCallback!=="function"){return}
options.shareType=1;options.shareApp=200;x5.exec(succCallback,errCallback,"app","share",[options])};x5.app.installApp=function(options,succCallback,errCallback){if(typeof succCallback!=="function"){return}
if(typeof errCallback!=="function"){return}
x5.exec(succCallback,errCallback,"app","installApp",[options])};x5.app.getInstalledApps=function(succCallback,errCallback){if(typeof succCallback!=="function"){return}
if(typeof errCallback!=="function"){return}
x5.exec(succCallback,errCallback,"app","getInstalledApps",[])};x5.app.loadAppUrl=function(options,succCallback,errCallback){if(typeof succCallback!=="function"){return}
if(typeof errCallback!=="function"){return}
x5.exec(succCallback,errCallback,"app","loadAppUrl",[options])};x5.app.addCustomQuicklink=function(options,succCallback,errCallback){x5.exec(succCallback,errCallback,"app","addCustomQuicklink",[])};x5.skin.getDownloadSkinList=function(options,succCallback,errCallback){x5.exec(succCallback,errCallback,"skin","getDownloadSkinList",[options])};x5.skin.getDownloadingSkinList=function(options,succCallback,errCallback){x5.exec(succCallback,errCallback,"skin","getDownloadingSkinList",[options])};x5.skin.getUsingSkinName=function(options,succCallback,errCallback){x5.exec(succCallback,errCallback,"skin","getUsingSkinName",[options])};x5.skin.getSkinDownloadProgress=function(options,succCallback,errCallback){x5.exec(succCallback,errCallback,"skin","getSkinDownloadProgress",[options])};x5.skin.downloadSkin=function(options,succCallback,errCallback){x5.exec(succCallback,errCallback,"skin","downloadSkin",[options])};x5.skin.switchToSkin=function(options,succCallback,errCallback){x5.exec(succCallback,errCallback,"skin","switchToSkin",[options])};x5.skin.openSkinNewPage=function(options,succCallback,errCallback){x5.exec(succCallback,errCallback,"skin","openSkinNewPage",[options])};x5.skin.closeSkinCurPage=function(options,succCallback,errCallback){x5.exec(succCallback,errCallback,"skin","closeSkinCurPage",[options])};x5.app.getBrowserParam=function(succCallback,errCallback){x5.exec(succCallback,errCallback,"app","getBrowserParam",[]);};x5.app.getAppVersion=function(succCallback,errCallback){x5.exec(succCallback,errCallback,"app","appVersion",[]);};x5.app.getAccountInfo=function(succCallback,errCallback){x5.exec(succCallback,errCallback,"login","getAccountInfo",[]);};}
if(typeof nativePublic==="undefined"){try{var nativePublic={};nativePublic.ua=navigator.userAgent;nativePublic.isAndroid=(function(){return/android/ig.test(nativePublic.ua);})();nativePublic.isIos=(function(){return/iphone|ipod/ig.test(nativePublic.ua);})();if(nativePublic.isAndroid){try{nativePublic.qua=JSON.parse(mtt.getBrowserParam());}catch(e){console.log('(获取Android的qua出错)'+e.toString());}
nativePublic.isx5=(function(){if(nativePublic.qua.qua.indexOf('ADRQBX5')!=-1){return true;}else{return false;}})();}
if(nativePublic.isIos){try{x5.app.getBrowserParam(function(data){nativePublic.qua=JSON.parse(data);},function(){});}catch(e){console.log('(获取ios的qua出错)'+e.toString());}}}catch(e){console.log('(native及预定义)'+e.toString());}}
var nativeAPI={};nativeAPI.getAppVersion=function(callback,errback){if(nativePublic.isAndroid){callback(qb_bridge.exec(null,null,"qb","appVersion",null));}else if(nativePublic.isIos){x5.app.getAppVersion(function(data){try{if(typeof data=='string'){callback(data);}else{callback(JSON.parse(data));}}catch(e){}},function(){});}else{G_helper.errorUploader('script','(没使用QQ浏览器)');}};nativeAPI.getQbId=function(callback,errback){if(nativePublic.isAndroid){var info=x5mtt.getAccountInfo(null);info=JSON.parse(info);if(info.qbid){callback(info.qbid);}else{callback(0);}}else if(nativePublic.isIos){x5.app.getAccountInfo(function(data){try{if(data.qbid){callback(data.qbid);}else{callback(0);}}catch(e){}},function(){});}else{G_helper.errorUploader('script','(没使用QQ浏览器)');}};nativeAPI.dledSkinList=function(options,callback,errback){if(nativePublic.isAndroid){try{var data=x5mtt.skin().getDownloadedSkinList();callback(data);}catch(e){G_helper.errorUploader('script','(调用浏览器接口dledSkinList出错)'+e.toString());}}else if(nativePublic.isIos){x5.skin.getDownloadSkinList(options,function(data){try{data=data.downloadskinlist;}catch(e){G_helper.errorUploader('script','(调用浏览器接口dledSkinList出错)'+e.toString());}
callback(data);},errback);}else{G_helper.errorUploader('script','(没使用QQ浏览器)');}};nativeAPI.dlingSkinList=function(options,callback,errback){if(nativePublic.isAndroid){try{var data=x5mtt.skin().getDownloadingSkinList();callback(data);}catch(e){G_helper.errorUploader('script','(调用浏览器接口dlingSkinList出错)'+e.toString());}}else if(nativePublic.isIos){x5.skin.getDownloadingSkinList(options,function(data){try{data=data.downloadingskinlist;}catch(e){G_helper.errorUploader('script','(调用浏览器接口dlingSkinList出错)'+e.toString());}
callback(data);},errback);}else{G_helper.errorUploader('script','(没使用QQ浏览器)');}};nativeAPI.useingSkinName=function(options,callback,errback){if(nativePublic.isAndroid){try{var data=x5mtt.skin().getUseingSkinName();callback(data);}catch(e){G_helper.errorUploader('script','(调用浏览器接口useingSkinName出错了)'+e.toString());}}else if(nativePublic.isIos){x5.skin.getUsingSkinName(options,function(data){try{data=data.usingskinname;}catch(e){G_helper.errorUploader('script','(调用浏览器接口useingSkinName出错)'+e.toString());}
callback(data);},errback);}else{G_helper.errorUploader('script','(没使用QQ浏览器)');}};nativeAPI.openNewPage=function(options,callback,errback){if(nativePublic.isIos){x5.skin.openSkinNewPage(options,callback,errback);}else{G_helper.errorUploader('script','(没使用QQ浏览器)');}};nativeAPI.closeSkinCurPage=function(callback,errback){x5.skin.closeSkinCurPage(callback,errback);};nativeAPI.downloadSkin=function(options,callback,errback){if(nativePublic.isAndroid){var jsonStr;try{jsonStr=JSON.stringify(options);}catch(e){G_helper.errorUploader('script','(downloadSkin json数据不合法)'+e.toString());}
try{x5mtt.skin().downloadSkin(jsonStr);callback();}catch(e){G_helper.errorUploader('script','(调用浏览器接口downloadSkin出错)'+e.toString());}}else if(nativePublic.isIos){x5.skin.downloadSkin(options,callback,errback);}else{G_helper.errorUploader('script','(没使用QQ浏览器)');}};nativeAPI.useSkin=function(options,callback,errback){if(nativePublic.isAndroid){var jsonStr;try{jsonStr=JSON.stringify(options);}catch(e){G_helper.errorUploader('script','(useSkin json数据不合法)'+e.toString());}
try{x5mtt.skin().useSkin(jsonStr);callback();}catch(e){G_helper.errorUploader('script','(调用浏览器接口useSkin出错)'+e.toString());}}else if(nativePublic.isIos){x5.skin.switchToSkin(options,callback,errback);}else{G_helper.errorUploader('script','(没使用QQ浏览器)');}};nativeAPI.skinDlProgress=function(options,callback,errback){if(nativePublic.isAndroid){var jsonStr;try{jsonStr=JSON.stringify(options);}catch(e){G_helper.errorUploader('script','(skinDlProgress json数据不合法)'+e.toString());}
try{var data=x5mtt.skin().getSkinDownloadProgress(jsonStr);callback(data);}catch(e){G_helper.errorUploader('script','(调用浏览器接口skinDlProgress出错)'+e.toString());}}else if(nativePublic.isIos){x5.skin.getSkinDownloadProgress(options,function(data){try{data=data.skindownloadprogress;}catch(e){G_helper.errorUploader('script','(调用浏览器接口skinDlProgress出错)'+e.toString());}
callback(data);},errback);}else{G_helper.errorUploader('script','(没使用QQ浏览器)');}};function LocalStorageCache(key){this.key=key;this.value=null;this.isValid=false;}
LocalStorageCache.prototype.getValue=function(){return this.value;};LocalStorageCache.prototype.invalid=function(){this.value=null;this.isValid=false;};LocalStorageCache.prototype.isValidCache=function(){return this.isValid;};LocalStorageCache.prototype.getLocalCache=function(succ,fail){if(!this.key){G_helper.errorUploader('script',"get cache failed, key = "+this.key);this.invalid();fail();return false;}
var options={};options.keys=[this.key];var self=this;try{if(window.localStorage){var storage=window.localStorage;if(!storage.getItem(this.key)){G_helper.errorUploader('script',"get cache, obj data = "+JSON.stringify(storage));self.invalid();fail();return false;}
var cacheStr=storage.getItem(this.key);if(cacheStr){try{var cache=JSON.parse(cacheStr);}catch(e){G_helper.errorUploader('script',"parse cache error, cacheStr = "+cacheStr);self.invalid();fail();return false;}}else{G_helper.errorUploader('script',"get cache, key = "+self.key+", cacheStr = "+cacheStr);self.invalid();fail();return false;}
if(cache.value==null){G_helper.errorUploader('script',"get cache succ, but cache = null");self.invalid();fail();return false;}else{self.value=cache.value;self.isValid=true;succ(cache.value);return true;}}}catch(e){G_helper.errorUploader("script","get cache error, key = "+this.key+", msg = "+e.message);self.invalid();fail();return false;}
return true;};LocalStorageCache.prototype.setLocalCache=function(data,succ,fail){if(!this.key){G_helper.errorUploader('script',"set cache failed, key = "+this.key);this.invalid();fail();return false;}
var obj={value:data};this.value=data;this.isValid=true;try{var cacheStr=JSON.stringify(obj);}catch(e){G_helper.errorUploader("script","转化cacheStr错误"+e.toString());this.invalid();fail();return false;}
try{if(window.localStorage){var storage=window.localStorage;storage.setItem(this.key,cacheStr);}}catch(e){G_helper.errorUploader('script',"save cache error, cache = "+cacheStr+", msg = "+e.toString());this.invalid();fail();return false;}
return true;};